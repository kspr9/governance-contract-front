import"./Bzak7iHL.js";import{c as lt,I as _,N as r,M as l,a as s,aJ as b,O as o,aM as S,y as u,J as N,Q as v,s as n,H as Ct,T as kt,K as St,aL as rt,w as Nt,x as At,R as Rt,aD as Et,aE as Mt}from"./CUmzwEjM.js";import{i as A}from"./AIt528uS.js";import{e as Tt,i as Dt}from"./komQGZa0.js";import{c as ot,r as G}from"./B79_7rn0.js";import{b as K}from"./D2vhXz3w.js";import{T as Ht,r as zt}from"./BYXg54TK.js";import{t as H}from"./BXOtlsz2.js";import{p as jt}from"./BG7SOyfb.js";const ee=lt({max_shares:null,eligible_claimants_map:null,admin_address:null,issued_shares:null,held_external_shares:null,registry_number:null,total_allocated_shares:null,share_ledger:null,unclaimed_share_pool:null});var It=_('<div style="left: 50%; transform: translateX(-50%);"> <div style="left: 50%; margin-left: -4px;"></div></div>'),Ot=_('<div class="relative inline-flex items-center"><button type="button" class="btn-help ml-1" aria-label="Help information"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button> <!></div>');function Vt(h,i){let e=jt(i,"position",3,"top"),d=b(!1);var m=Ot(),c=r(m),y=l(c,2);{var g=f=>{var x=It();let E;var w=r(x),C=l(w);let k;o(x),N((M,z)=>{E=ot(x,1,"absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg whitespace-nowrap",null,E,M),v(w,`${i.text??""} `),k=ot(C,1,"absolute w-2 h-2 bg-gray-900 transform rotate-45",null,k,z)},[()=>({"bottom-full":e()==="top","top-full":e()==="bottom","right-full":e()==="left","left-full":e()==="right","mb-2":e()==="top","mt-2":e()==="bottom","mr-2":e()==="left","ml-2":e()==="right"}),()=>({"top-full":e()==="top","bottom-full":e()==="bottom","left-full":e()==="left","right-full":e()==="right"})]),u(f,x)};A(y,f=>{s(d)&&f(g)})}o(m),S("mouseenter",c,()=>n(d,!0)),S("mouseleave",c,()=>n(d,!1)),S("focus",c,()=>n(d,!0)),S("blur",c,()=>n(d,!1)),u(h,m)}const R=lt({admin:null,deployedContracts:null});async function st(h){try{const e=await(await fetch(`https://api.mainnet.tzkt.io/v1/contracts/${h}/storage`)).json();return R.admin=e.admin,R.deployedContracts=e.deployedContracts,e}catch(i){throw console.error("Failed to load governance contract storage:",i),i}}var Lt=_('<p class="text-(--primary)"> </p>'),qt=_('<p class="text-(--destructive)"> </p>'),Jt=(h,i,e)=>i(e()),Pt=_('<tr class="table-row"><td class="p-2"> </td><td class="font-mono p-2"> </td><td class="p-2"><button class="btn-secondary px-3 py-1 text-xs">View</button></td></tr>'),Wt=_('<tr class="table-row"><td class="text-center p-2 text-(--muted-foreground)" colspan="3">No deployed contracts found</td></tr>'),Bt=_('<div class="container mx-auto p-4"><form class="space-y-4 p-4 border rounded card svelte-1bfbz8w"><h2 class="section-header"> <!></h2> <div><label class="block text-sm font-medium text-(--muted-foreground)"> </label> <input type="text" placeholder="Admin Address" class="input mt-1 block w-full" required/></div> <div><label class="block text-sm font-medium text-(--muted-foreground)"> </label> <input type="number" placeholder="Maximum Shares" class="input mt-1 block w-full" required/></div> <div><label class="block text-sm font-medium text-(--muted-foreground)"> </label> <input type="number" placeholder="Registry Number" class="input mt-1 block w-full" required/></div> <button type="submit" class="btn-primary"><!></button> <!> <!></form> <div class="mt-8 card"><div class="section-header mb-2">Deployed Share Registers</div> <div class="text-sm text-(--muted-foreground) mb-4">View all wallet contracts that have been deployed from the governance contract.</div> <table class="w-full border-collapse text-sm"><thead><tr class="table-header"><th class="text-left p-2">Registry Number</th><th class="text-left p-2">Contract Address</th><th class="text-left p-2">Actions</th></tr></thead><tbody><!></tbody></table></div></div>');function Gt(h,i){Ct(i,!0);let e=b(""),d=b(""),m=b(""),c=b(!1),y=b(""),g=b("");const f="KT1A68pp2xWMSbyvVmC63oJreW6RAfotCVNE";async function x(t){t.preventDefault(),n(c,!0),n(g,""),n(y,"");try{if(!s(e)||!s(d)||!s(m))throw new Error("Please fill in all fields");const a=parseInt(s(d)),p=parseInt(s(m));if(isNaN(a)||isNaN(p))throw new Error("Max Shares and Registry Number must be valid numbers");const J=await Ht.wallet.at(f);await zt();const D=await J.methodsObject.create_company_wallet({companyID:p,shares:a,admin:s(e)}).send();await D.confirmation(2),n(y,D.opHash,!0),await st(f)}catch(a){console.error("Error creating company:",a),n(g,a.message,!0)}finally{n(c,!1)}}function E(t){i.onViewContract(t)}kt(()=>{st(f)});var w=Bt(),C=r(w),k=r(C),M=r(k),z=l(M);Vt(z,{text:"Create a new digital share register for a company"}),o(k);var j=l(k,2),I=r(j),nt=r(I,!0);o(I);var X=l(I,2);G(X),o(j);var O=l(j,2),V=r(O),it=r(V,!0);o(V);var F=l(V,2);G(F),o(O);var L=l(O,2),q=r(L),dt=r(q,!0);o(q);var Q=l(q,2);G(Q),o(L);var T=l(L,2),ct=r(T);{var ut=t=>{var a=rt("Sending...");u(t,a)},vt=t=>{var a=rt("Deploy new Company Share Register");u(t,a)};A(ct,t=>{s(c)?t(ut):t(vt,!1)})}o(T);var U=l(T,2);{var mt=t=>{var a=Lt(),p=r(a);o(a),N(()=>v(p,`Transaction sent! Hash: ${s(y)??""}`)),u(t,a)};A(U,t=>{s(y)&&t(mt)})}var pt=l(U,2);{var ft=t=>{var a=qt(),p=r(a,!0);o(a),N(()=>v(p,s(g))),u(t,a)};A(pt,t=>{s(g)&&t(ft)})}o(C);var Y=l(C,2),$=l(r(Y),4),Z=l(r($)),bt=r(Z);{var _t=t=>{var a=Nt(),p=At(a);Tt(p,17,()=>Object.entries(R.deployedContracts),Dt,(J,D)=>{var tt=Et(()=>Mt(s(D),2));let yt=()=>s(tt)[0],et=()=>s(tt)[1];var P=Pt(),W=r(P),gt=r(W,!0);o(W);var B=l(W),xt=r(B,!0);o(B);var at=l(B),wt=r(at);wt.__click=[Jt,E,et],o(at),o(P),N(()=>{v(gt,yt()),v(xt,et())}),u(J,P)}),u(t,a)},ht=t=>{var a=Wt();u(t,a)};A(bt,t=>{R.deployedContracts&&Object.keys(R.deployedContracts).length>0?t(_t):t(ht,!1)})}o(Z),o($),o(Y),o(w),N(()=>{v(M,`${H.CREATE_SHARE_WALLET} `),v(nt,H.ADMIN_ADDRESS),v(it,H.MAX_SHARES),v(dt,H.REGISTRY_NUMBER),T.disabled=s(c)}),S("submit",C,x),K(X,()=>s(e),t=>n(e,t)),K(F,()=>s(d),t=>n(d,t)),K(Q,()=>s(m),t=>n(m,t)),u(h,w),St()}Rt(["click"]);const ae=Object.freeze(Object.defineProperty({__proto__:null,default:Gt},Symbol.toStringTag,{value:"Module"}));export{ae as C,Vt as H,ee as t};
